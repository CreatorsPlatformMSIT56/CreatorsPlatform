@{
}
<div class="container  d-flex justify-content-center align-items-center p-4 my-5">
	<div class="row">
		<h1 class="text-center">忘記密碼頁面</h1>
		<div class="text-center my-5">
			<form action="/" method="post">
				<p><label>Email : </label></p>
				<input id="Email" type="email" />
				<button id="Verification" type="submit">取得驗證碼</button>
			</form>
			<br /><br />
			<div id="extraFields" style="display: none;">
				<input id="VerificationCode" type="text" value="請輸入驗證碼">
				<input type="submit" value="OK" id="verificationOk">
			</div>
		</div>
		<div  class="text-center" id="userPasswd" style=" display: none;">
			<p><label for="UserPasswd">Passwd</label></p>
			<p><input id="UserPasswd" type="password" name="UserPasswd" pattern="^[a-zA-Z0-9]{8,100}$" title="請輸入英文和數字，至少為 8字符" required></p>
			<p><label for="UserPasswdCheck">Passwd Check</label></p>
			<p><input id="UserPasswdCheck" type="password" name="UserPasswdCheck" pattern="^[a-zA-Z0-9]{8,100}$" title="請輸入英文和數字，至少為 8字符" required></p>
			<button id="showPasswordBtn" type="button">顯示密碼</button>
			<a href="/yhu/Login"><input type="submit" value="passwdOk" id="passwdOk"></a>
			<p style="display: none;" id="PasswdError">兩次密碼不符合</p>
		</div>
	</div>
</div>


@* <p id="Msg">123</p>
<p></p> *@
<script>
	var verifyCode = 0;
	//取得驗證碼+系統自動發信
	$('#Verification').on("click", function () {
		var EmailFromClient = $('#Email').val()
		//驗證碼亂數產生一組6個數字
		verifyCode = Math.random().toFixed(6).slice(-6);
		// console.log("456");
		$.ajax({
			url: "/yhu/sendGmail",
			method: "get",
			data: {
				MEmail: EmailFromClient,
				verifyCode: verifyCode
			},
			success: function (e) {
				// $('#Msg').hide();
				// $('#CheckIdentifyCode').show();
				console.log("verifyCode = " + verifyCode);
			}
		})
	})


	//顯示輸入驗證碼和確認按鈕
	$(document).ready(function () {
		// 当点击取得验证码按钮时
		$("#Verification").click(function (event) {
			event.preventDefault(); // 阻止默认的表单提交行为
			// 显示额外的输入字段和提交按钮
			$("#extraFields").show();
		});
		$("#VerificationCode").focus(function () {
			// 如果值等于默认文本，则清空值
			if ($(this).val() === "請輸入驗證碼") {
				$(this).val("");
			}
		});
		// 当文本框失去焦点时
		$("#VerificationCode").blur(function () {
			// 如果值为空，则恢复默认文本
			if ($(this).val().trim() === "") {
				$(this).val("請輸入驗證碼");
			}
		});
	});


	$(document).ready(function () {
		// 当点击取得验证码按钮时
		$("#verificationOk").on("click", function () {
			event.preventDefault(); // 阻止默认的表单提交行为
			// 显示额外的输入字段和提交按钮
			$("#userPasswd").show();
		});
		$("#UserPasswd").focus(function () {
			// 如果值等于默认文本，则清空值
			if ($(this).val() === "請輸入密碼") {
				$(this).val("");
			}
		});
		// 当文本框失去焦点时
		$("#UserPasswd").blur(function () {
			// 如果值为空，则恢复默认文本
			if ($(this).val().trim() === "") {
				$(this).val("請再次輸入密碼");
			}
		});
	});


	$(function () {
		$("#showPasswordBtn").on("click", function () {
			var passwordField = $("#UserPasswd");
			var passwordFieldCheck = $("#UserPasswdCheck");
			var passwordError = $("#PasswdError");

			if (passwordField.attr("type") === "password") {
				passwordField.attr("type", "text");
				passwordError.hide();
			} else {
				passwordField.attr("type", "password");
			}
			if (passwordFieldCheck.attr("type") === "password") {
				passwordFieldCheck.attr("type", "text");
				passwordError.hide();
			} else {
				passwordFieldCheck.attr("type", "password");
			}
		});
	});
</script>