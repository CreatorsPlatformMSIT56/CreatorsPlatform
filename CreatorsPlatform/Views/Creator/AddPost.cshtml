@model Content

@* <link href="https://cdn.jsdelivr.net/npm/quill@2.0.0-rc.2/dist/quill.snow.css" rel="stylesheet"> *@
<link rel="stylesheet" href="/css/Shared/Quill.css" />

<!-- 還必須讀取目前創作者的資料 串回到Content -->
<h1>發布作品</h1>

<div class="quillcontainer">
    @* <form asp-action="CreatePost" asp-controller="Creator" method="post" enctype="multipart/form-data"> *@
    <form enctype="multipart/form-data">
        <div class="form-group"> <!-- 類別與子類別選擇 -->
            <div class="row">
                <div class="col form-group">
                    <label for="CategoryId" class="control-label font-weight-bold">
                        類別<span class="text-danger ml-1"> *</span>
                    </label>
                    <select id="categorySelect" for="CategoryId" asp-items="ViewBag.CategoryId" class="form-select">
                        <option selected>請選擇類別</option>
                    </select>
                </div>
                <div class="col">
                    <label for="SubtitleId" class="control-label font-weight-bold">
                        子類別
                    </label>
                    <select for="SubtitleId" id="subtitleSelect" class="form-select">
                        <option selected>請選擇子類別</option>
                        @* <option value="4">插畫</option>
                        <option value="5">塗鴉</option>
                        <option value="6">背景</option> *@
                    </select>
                </div>
            </div>
        </div>
        <!-- 上傳圖像(先一張) -->
        <div class="form-group"> 
            <label class="font-weight-bold">
                上傳圖片<span class="text-danger ml-1"> *</span>
            </label>
            <input type="file" id="ImageFile" name="ImageFile" onchange="previewImage()" />
            <div class="PreviewImgWarp"><img id="preview-ImageFile" src="#" alt="" style="max-width: 300px"/></div>
            @* <img id="post-img" src="#" alt="" /> *@
        </div>
        <!-- 上傳圖像(先一張) END -->
        <div class="form-group">
            <label for="Title" class="form-label">
                標題<span class="text-danger ml-1"> *</span>
            </label>
            <input for="Title" type="text" class="form-control" placeholder="請輸入標題" id="postTitle">
        </div>
        <div class="form-group">
            <label for="Description">作品描述<span class="text-danger ml-1"> *</span></label>
            <!-- Quill Editor Start -->
            <div id="editor"></div>
            <!-- Quill Editor End -->
        </div>
        <!-- 放置Quill內容 -->
        <input for="Description" type="hidden" id="quill-content" name="Quill-content" />
        <!-- 放置Quill內容END -->
        <!-- 預計放Tags -->
        <div class="form-group">
            <label @* asp-for="Tags" *@ class="form-label">
                @* 標籤 *@
            </label>
            @* <input asp-for="Title" type="text" class="form-control" placeholder="請輸入標題" id="postTitle"> *@
        </div>
        <button id="submitInput" class="mb-3 btn btn-primary" type="button"
                data-bs-toggle="modal" data-bs-target="#submitModal">
            發送文章
        </button>
        <!-- 確認 Modal -->
        <div id="submitModal" class="modal" tabindex="-1">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">發布作品</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <p>確認發布作品？</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                        <button type="button" *@ class="btn btn-primary" id="confirm-btn" onclick="NewPostToSQL()">確認</button><!-- 還要串出去 -->
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<!-- 確認 Modal -->
@* <div id="submitModal" class="modal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">發布作品</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>確認發布作品？</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">取消</button>
                <button type="submit" class="btn btn-primary" id="confirm-btn" onclick="NewPostToSQL()">確認</button><!-- 還要串出去 -->
            </div>
        </div>
    </div>
</div> *@

<!-- 自訂 js -->
@* <script>
    $(function () {
        // 上傳圖片並且預覽功能
        // 封面圖片
        $("#ImageFile").change(function () {
            readURL(this);
            // this是改變的那個元素(input)
        });
        function readURL(input) {

            if (input.files && input.files[0]) {

                var reader = new FileReader();

                reader.onload = function (e) {
                    img = e.target.result;
                    $("#preview-ImageFile").attr('src', img);
                }

                reader.readAsDataURL(input.files[0]);

            }
        }
</script> *@

<script>
    var submitModal = document.getElementById('submitModal')
    var submitInput = document.getElementById('submitInput')

    submitModal.addEventListener('shown.bs.modal', function () {
        submitInput.focus()
    })
</script>


<script src="~/js/Creator/AddPost.js"></script>


<script src="https://cdn.jsdelivr.net/npm/quill@2.0.0-rc.2/dist/quill.js"></script>
<script src="/js/Creator/Quill.js"></script>